<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MixAssist - Audio-Language Dataset for Co-Creative AI</title>
    <meta
      name="description"
      content="MixAssist: An Audio-Language Dataset for Co-Creative AI Assistance in Music Mixing. Published at COLM 2025."
    />
    <meta property="og:title" content="MixAssist Dataset" />
    <meta
      property="og:description"
      content="An Audio-Language Dataset for Co-Creative AI Assistance in Music Mixing"
    />
    <meta property="og:type" content="website" />
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide React -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .fade-in-on-scroll {
        opacity: 0;
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        transform: translateY(30px);
      }
      .fade-in-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
    <!-- Preload pipeline images -->
    <link rel="preload" as="image" href="imgs/pipeline-1.png" />
    <link rel="preload" as="image" href="imgs/pipeline-2.png" />
    <link rel="preload" as="image" href="imgs/pipeline-3.png" />
    <link rel="preload" as="image" href="imgs/pipeline-4.png" />
    <link rel="preload" as="image" href="imgs/pipeline-5.png" />
    <link rel="preload" as="image" href="imgs/pipeline-light-1.png" />
    <link rel="preload" as="image" href="imgs/pipeline-light-2.png" />
    <link rel="preload" as="image" href="imgs/pipeline-light-3.png" />
    <link rel="preload" as="image" href="imgs/pipeline-light-4.png" />
    <link rel="preload" as="image" href="imgs/pipeline-light-5.png" />
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef, useMemo } = React;

      // --- DATA ---
      const csvData = `instruction,response,input_audio
"The bass seems to be clashing with the kick drum. Any suggestions?","Try side-chain compression on the bass triggered by the kick. Also, cut around 60-80Hz on the bass and boost that range slightly on the kick.","audio/sample_001.mp3"
"How can I make the mix sound wider?","Use the Haas effect on some elements, pan your hi-hats and percussion, and try some stereo widening on the reverb returns. Keep bass and kick centered though.","audio/sample_002.mp3"
"The vocals are getting lost in the mix. What should I do?","Try a bit of parallel compression to bring up the body of the vocal. You can also use a dynamic EQ to carve out space in the instrumental tracks around the vocal frequencies.","audio/sample_003.mp3"
"My reverb sounds muddy. How can I clean it up?","EQ your reverb return. A high-pass filter to cut out low frequencies and a slight dip in the mids can clean it up significantly without losing the sense of space.","audio/sample_004.mp3"
"The acoustic guitar sounds a bit thin. How can I add some warmth?","Try a subtle chorus effect or a tape saturation plugin. A little bit of compression with a slower attack time can also help bring out the body of the instrument.","audio/sample_005.mp3"
"How do I get my drums to punch through the mix more?","Bus your drum tracks together and use some parallel compression. Also, check for phase issues between your kick and snare mics. A transient shaper can also help emphasize the attack.","audio/sample_006.mp3"
"What's a good starting point for compressing a lead vocal?","Start with a ratio of around 3:1 or 4:1, a medium attack (10-20ms), and a fast release. Aim for about 3-5dB of gain reduction on the loudest parts. Adjust from there to taste.","audio/sample_007.mp3"
"The overall mix feels a bit dull. How can I add some sparkle?","A high-shelf EQ boost on the master bus, starting around 10-12kHz, can add some air and brightness. Be subtle with it. A multiband exciter can also work wonders.","audio/sample_008.mp3"
"Should I put reverb on my bass?","Generally, it's best to keep bass frequencies mono and dry to maintain power and clarity. If you want space, you can try a very short, subtle reverb or a chorus effect on the mid/high frequencies of the bass only.","audio/sample_009.mp3"
"My cymbals are too harsh. How can I tame them?","Use a de-esser targeting the harsh frequencies (usually around 5-8kHz). You can also use a dynamic EQ to cut those frequencies only when they get too loud.","audio/sample_010.mp3"
"How can I make the electric guitar sound bigger?","Double-track the guitar part and pan one hard left and the other hard right. Even slight variations in timing and performance will create a wide, full sound.","audio/sample_011.mp3"
"The piano sounds distant. How do I bring it forward?","Reduce the amount of reverb on it. You can also try a slight boost in the upper-mid frequencies (around 1-3kHz) to increase its presence.","audio/sample_012.mp3"`;

      // --- COMPONENTS ---

      const LucideIcon = ({ name, className = "", ...props }) => {
        const IconComponent = lucide[name];
        if (!IconComponent) return null;
        return React.createElement("span", {
          dangerouslySetInnerHTML: {
            __html: lucide.createElement(lucide[name]).outerHTML,
          },
          className: `inline-flex items-center justify-center ${className}`,
          style: {
            display: "inline-flex",
            alignItems: "center",
            justifyContent: "center",
          },
          ...props,
        });
      };

      const getSrcset = (imagePath) => {
        const [basePath, queryString] = imagePath.split('?');
        const parts = basePath.split('.');
        const extension = parts.pop();
        const filename = parts.join('.');
        const retinaPath = `${filename}@4x.${extension}`;
        const timestamp = queryString ? `?${queryString}` : '';
        return `${basePath}${timestamp} 1x, ${retinaPath}${timestamp} 4x`;
      };

      const AnimatedStatCard = ({
        icon,
        finalValue,
        label,
        description,
        theme,
      }) => {
        const [count, setCount] = useState(0);
        const ref = useRef(null);
        const isNumeric = !isNaN(parseFloat(finalValue));

        useEffect(() => {
          const observer = new IntersectionObserver(
            ([entry]) => {
              if (entry.isIntersecting) {
                if (isNumeric) {
                  let start = 0;
                  const end = parseFloat(finalValue);
                  if (end === 0) return;

                  const duration = 2000;
                  const startTime = Date.now();

                  const animateCount = () => {
                    const now = Date.now();
                    const progress = Math.min(1, (now - startTime) / duration);
                    const current = progress * end;

                    if (String(finalValue).includes(".")) {
                      setCount(current.toFixed(1));
                    } else {
                      setCount(Math.floor(current));
                    }

                    if (progress < 1) {
                      requestAnimationFrame(animateCount);
                    } else {
                      setCount(parseFloat(finalValue));
                    }
                  };
                  requestAnimationFrame(animateCount);
                } else {
                  setCount(finalValue);
                }
                observer.disconnect();
              }
            },
            { threshold: 0.5 }
          );

          const currentRef = ref.current;
          if (currentRef) {
            observer.observe(currentRef);
          }

          return () => {
            if (currentRef) {
              observer.unobserve(currentRef);
            }
          };
        }, []);

        const getThemeClasses = (darkClasses, lightClasses) => {
          return theme === "dark" ? darkClasses : lightClasses;
        };

        return (
          <div
            ref={ref}
            className={getThemeClasses(
              "relative bg-gray-900/80 backdrop-blur-sm rounded-xl p-6 border border-gray-800 text-center",
              "relative bg-white/80 backdrop-blur-sm rounded-xl p-6 border border-slate-200 shadow-sm text-center"
            )}
          >
            <div className="flex justify-center items-center mb-4">
              <LucideIcon
                name={icon}
                className={getThemeClasses(
                  "w-8 h-8 text-cyan-500",
                  "w-8 h-8 text-orange-500"
                )}
              />
            </div>
            <div
              className={getThemeClasses(
                "text-4xl font-bold mb-2 text-orange-400",
                "text-4xl font-bold mb-2 text-blue-600"
              )}
            >
              {count}
              {isNumeric && String(finalValue).includes("s") ? "s" : ""}
            </div>
            <div
              className={getThemeClasses(
                "text-lg font-semibold text-white",
                "text-lg font-semibold text-slate-800"
              )}
            >
              {label}
            </div>
            <p
              className={getThemeClasses(
                "text-sm text-gray-400 mt-2",
                "text-sm text-slate-600 mt-2"
              )}
            >
              {description}
            </p>
          </div>
        );
      };

      // --- Animated Pipeline Step Component ---
      const AnimatedPipelineStep = ({ step, theme, animationDelay }) => {
        const [isVisible, setIsVisible] = useState(false);
        const ref = useRef(null);

        useEffect(() => {
          const element = ref.current;
          if (!element) return;

          const observer = new IntersectionObserver(
            ([entry]) => {
              if (entry.isIntersecting) {
                setIsVisible(true);
                observer.unobserve(element);
              }
            },
            { threshold: 0.2 }
          );

          observer.observe(element);

          return () => {
            if (element) {
              observer.unobserve(element);
            }
          };
        }, []);

        const getThemeClasses = (darkClasses, lightClasses) => {
          return theme === "dark" ? darkClasses : lightClasses;
        };

        return (
          <div
            ref={ref}
            className={`fade-in-on-scroll ${isVisible ? "is-visible" : ""}`}
            style={{ transitionDelay: animationDelay }}
          >
            <div className="flex flex-col items-center text-center">
              <div
                className={getThemeClasses(
                  "bg-gray-900/50 rounded-2xl p-4",
                  "bg-white rounded-2xl p-4 shadow-md"
                )}
              >
                <img
                  src={theme === "dark" ? step.image_dark : step.image_light}
                  srcSet={theme === "dark" ? getSrcset(step.image_dark) : getSrcset(step.image_light)}
                  alt={step.title}
                  className="h-40 object-contain"
                />
              </div>
              <h3
                className={getThemeClasses(
                  "font-semibold mt-4 mb-2 text-white",
                  "font-semibold mt-4 mb-2 text-slate-800"
                )}
              >
                {step.title}
              </h3>
              <p
                className={getThemeClasses(
                  "text-sm text-gray-400",
                  "text-sm text-slate-600"
                )}
              >
                {step.description}
              </p>
            </div>
          </div>
        );
      };

      const AudioPlayer = ({
        audioSrc,
        id,
        onPlay,
        isPlaying,
        progress,
        theme,
      }) => {
        return (
          <div className="flex items-center gap-3">
            <button
              onClick={() => onPlay(id)}
              className={`flex items-center justify-center w-10 h-10 ${
                theme === "dark"
                  ? "bg-orange-500 hover:bg-orange-600"
                  : "bg-blue-600 hover:bg-blue-700"
              } text-white rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex-shrink-0`}
            >
              <LucideIcon
                name={isPlaying ? "Pause" : "Play"}
                className="w-5 h-5"
              />
            </button>
            <div className="w-full">
              <div
                className={`relative h-1.5 ${
                  theme === "dark" ? "bg-gray-600/50" : "bg-slate-300"
                } rounded-full overflow-hidden`}
              >
                <div
                  className={`absolute left-0 top-0 h-full ${
                    theme === "dark"
                      ? "bg-gradient-to-r from-orange-500 to-teal-400"
                      : "bg-gradient-to-r from-blue-600 to-orange-500"
                  } transition-all duration-200`}
                  style={{ width: `${progress}%` }}
                />
              </div>
            </div>
          </div>
        );
      };

      const DatasetExplorer = ({ theme }) => {
        const [allData, setAllData] = useState([]);
        const [filteredData, setFilteredData] = useState([]);
        const [visibleCount, setVisibleCount] = useState(4);
        const [activeTopic, setActiveTopic] = useState("All");

        const [activeAudio, setActiveAudio] = useState(null);
        const [audioProgress, setAudioProgress] = useState({});

        const getThemeClasses = (darkClasses, lightClasses) => {
          return theme === "dark" ? darkClasses : lightClasses;
        };

        const topics = useMemo(() => {
          const topicKeywords = [
            "EQ",
            "Compression",
            "Reverb",
            "Bass",
            "Drums",
            "Vocal",
            "Guitar",
            "Pan",
            "Effect",
            "Level",
            "Wider",
            "Harsh",
          ];
          const foundTopics = new Set(["All"]);
          allData.forEach((item) => {
            const text = `${item.instruction} ${item.response}`.toLowerCase();
            topicKeywords.forEach((topic) => {
              if (text.includes(topic.toLowerCase())) {
                foundTopics.add(topic);
              }
            });
          });
          return Array.from(foundTopics);
        }, [allData]);

        useEffect(() => {
          const parseCSV = (csv) => {
            const lines = csv.trim().split("\n");
            const headers = lines[0].split(",");
            const data = lines.slice(1).map((line, index) => {
              const values = line
                .match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g)
                .map((val) => val.replace(/"/g, ""));
              return {
                id: `explorer-${index}`,
                instruction: values[0],
                response: values[1],
                audio: values[2],
              };
            });
            return data;
          };
          const parsed = parseCSV(csvData);
          setAllData(parsed);
          setFilteredData(parsed);
        }, []);

        useEffect(() => {
          setVisibleCount(4);
          if (activeTopic === "All") {
            setFilteredData(allData);
          } else {
            const filtered = allData.filter((item) => {
              const text = `${item.instruction} ${item.response}`.toLowerCase();
              return text.includes(activeTopic.toLowerCase());
            });
            setFilteredData(filtered);
          }
        }, [activeTopic, allData]);

        const audioRef = useRef(null);

        useEffect(() => {
          return () => {
            if (audioRef.current) {
              audioRef.current.pause();
              audioRef.current = null;
            }
          };
        }, []);

        const handlePlay = (id) => {
          const item = allData.find((d) => d.id === id);
          if (!item) return;

          if (activeAudio === id) {
            setActiveAudio(null);
            if (audioRef.current) audioRef.current.pause();
          } else {
            if (audioRef.current) audioRef.current.pause();
            setActiveAudio(id);
            const audioPath = `https://storage.googleapis.com/gemini-web-resources/mixassist-audio/${
              item.audio.split("/")[1]
            }`;
            audioRef.current = new Audio(audioPath);
            audioRef.current
              .play()
              .catch((e) => console.error("Error playing audio:", e));
            audioRef.current.ontimeupdate = () => {
              const progress =
                (audioRef.current.currentTime / audioRef.current.duration) *
                100;
              setAudioProgress({ [id]: progress });
            };
            audioRef.current.onended = () => {
              setActiveAudio(null);
              setAudioProgress({ [id]: 0 });
            };
          }
        };

        const loadMore = () => {
          setVisibleCount((prev) => prev + 4);
        };

        return (
          <section
            className={getThemeClasses("py-20 bg-gray-900", "py-20 bg-white")}
          >
            <div className="container mx-auto px-6">
              <h2
                className={getThemeClasses(
                  "text-4xl font-bold text-center mb-4 text-orange-400",
                  "text-4xl font-bold text-center mb-4 text-blue-600"
                )}
              >
                Interactive Dataset Explorer
              </h2>
              <p
                className={getThemeClasses(
                  "text-center text-gray-400 mb-12 max-w-2xl mx-auto",
                  "text-center text-slate-600 mb-12 max-w-2xl mx-auto"
                )}
              >
                Filter our dataset of 431 conversation turns. Click on a topic
                to explore related dialogues and hear the original audio.
              </p>

              <div className="flex flex-wrap gap-3 justify-center mb-12">
                {topics.map((topic) => (
                  <button
                    key={topic}
                    onClick={() => setActiveTopic(topic)}
                    className={`px-5 py-2 rounded-full text-sm font-semibold transition-all duration-300 transform hover:scale-105 ${
                      activeTopic === topic
                        ? getThemeClasses(
                            "bg-orange-500 text-white shadow-lg",
                            "bg-blue-600 text-white shadow-lg"
                          )
                        : getThemeClasses(
                            "bg-gray-700 hover:bg-gray-600 text-gray-300",
                            "bg-white hover:bg-slate-200 text-slate-700 border border-slate-300"
                          )
                    }`}
                  >
                    {topic}
                  </button>
                ))}
              </div>

              <div className="text-center mb-8">
                <p
                  className={getThemeClasses("text-gray-400", "text-slate-500")}
                >
                  Showing{" "}
                  <span
                    className={getThemeClasses(
                      "font-bold text-orange-400",
                      "font-bold text-blue-600"
                    )}
                  >
                    {Math.min(visibleCount, filteredData.length)}
                  </span>{" "}
                  of{" "}
                  <span
                    className={getThemeClasses(
                      "font-bold text-orange-400",
                      "font-bold text-blue-600"
                    )}
                  >
                    {filteredData.length}
                  </span>{" "}
                  results
                </p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto">
                {filteredData.slice(0, visibleCount).map((item, index) => (
                  <div
                    key={item.id}
                    className={`${getThemeClasses(
                      "bg-gray-800/50 border-gray-700",
                      "bg-white border-slate-200 shadow-sm"
                    )} backdrop-blur-sm rounded-2xl p-6 border transition-all duration-300 hover:border-blue-500/50 opacity-0`}
                    style={{
                      animation: `fadeInUp 0.6s ease-out ${
                        (index % 4) * 0.1
                      }s forwards`,
                    }}
                  >
                    <div className="mb-4">
                      <AudioPlayer
                        audioSrc={item.audio}
                        id={item.id}
                        onPlay={handlePlay}
                        isPlaying={activeAudio === item.id}
                        progress={audioProgress[item.id] || 0}
                        theme={theme}
                      />
                    </div>

                    <div className="space-y-4">
                      <div className="bg-blue-500/10 rounded-lg p-4 border border-blue-500/20">
                        <div className="text-xs text-blue-500 mb-2 font-semibold flex items-center gap-2">
                          <LucideIcon name="User" className="w-4 h-4" /> Amateur
                          Query
                        </div>
                        <p
                          className={getThemeClasses(
                            "text-gray-300 text-sm",
                            "text-slate-800 text-sm"
                          )}
                        >
                          {item.instruction}
                        </p>
                      </div>
                      <div
                        className={getThemeClasses(
                          "bg-cyan-500/10 rounded-lg p-4 border-cyan-500/20",
                          "bg-orange-500/10 rounded-lg p-4 border-orange-500/20"
                        )}
                      >
                        <div
                          className={getThemeClasses(
                            "text-xs text-cyan-600 mb-2 font-semibold flex items-center gap-2",
                            "text-xs text-orange-600 mb-2 font-semibold flex items-center gap-2"
                          )}
                        >
                          <LucideIcon name="MicVocal" className="w-4 h-4" />{" "}
                          Expert Response
                        </div>
                        <p
                          className={getThemeClasses(
                            "text-gray-300 text-sm",
                            "text-slate-800 text-sm"
                          )}
                        >
                          {item.response}
                        </p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              {visibleCount < filteredData.length && (
                <div className="text-center mt-12">
                  <button
                    onClick={loadMore}
                    className={getThemeClasses(
                      "inline-flex items-center gap-2 px-6 py-3 bg-teal-500/20 backdrop-blur-sm rounded-lg hover:bg-teal-500/30 transition-all duration-300 border border-teal-500/50 text-teal-300",
                      "inline-flex items-center gap-2 px-6 py-3 bg-white backdrop-blur-sm rounded-lg hover:bg-slate-200 transition-all duration-300 border border-slate-300 text-slate-700"
                    )}
                  >
                    <LucideIcon name="Plus" className="w-5 h-5" />
                    <span>Load More</span>
                  </button>
                </div>
              )}
            </div>
          </section>
        );
      };

      const MixAssistWebsite = () => {
        const [activeAudio, setActiveAudio] = useState(null);
        const [audioProgress, setAudioProgress] = useState({});
        const [selectedComparison, setSelectedComparison] = useState(0);
        const [isTransitioning, setIsTransitioning] = useState(false);
        const [copiedBibtex, setCopiedBibtex] = useState(false);
        const [theme, setTheme] = useState("dark");
        const canvasRef = useRef(null);
        const audioRef = useRef(null);

        const getThemeClasses = (darkClasses, lightClasses) => {
          return theme === "dark" ? darkClasses : lightClasses;
        };

        const toggleTheme = () => {
          setTheme((prevTheme) => (prevTheme === "dark" ? "light" : "dark"));
        };

        const handleGenericPlay = (id, audioFile) => {
          if (activeAudio === id) {
            setActiveAudio(null);
            if (audioRef.current) audioRef.current.pause();
          } else {
            if (audioRef.current) audioRef.current.pause();
            setActiveAudio(id);
            const audioPath = `https://storage.googleapis.com/gemini-web-resources/mixassist-audio/${
              audioFile.split("/")[1] || "sample_001.mp3"
            }`;
            audioRef.current = new Audio(audioPath);
            audioRef.current
              .play()
              .catch((e) => console.error("Error playing audio:", e));
            audioRef.current.ontimeupdate = () => {
              const progress =
                (audioRef.current.currentTime / audioRef.current.duration) *
                100;
              setAudioProgress({ [id]: progress });
            };
            audioRef.current.onended = () => {
              setActiveAudio(null);
              setAudioProgress({ [id]: 0 });
            };
          }
        };

        useEffect(() => {
          const canvas = canvasRef.current;
          if (!canvas) return;
          const ctx = canvas.getContext("2d");
          const resizeCanvas = () => {
            canvas.width = window.innerWidth;
            canvas.height = 600;
          };
          resizeCanvas();
          window.addEventListener("resize", resizeCanvas);
          let animationId;
          let phase = 0;
          const animate = () => {
            ctx.fillStyle =
              theme === "dark"
                ? "rgba(0, 0, 0, 0.08)"
                : "rgba(255, 255, 255, 0.08)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = theme === "dark" ? "#3b82f6" : "#2563eb";
            ctx.lineWidth = 2;
            ctx.shadowBlur = 15;
            ctx.shadowColor = theme === "dark" ? "#3b82f6" : "#2563eb";
            ctx.beginPath();
            for (let x = 0; x < canvas.width; x += 3) {
              const y =
                canvas.height / 2 +
                Math.sin(x * 0.003 + phase) * 40 * Math.sin(phase * 0.5);
              if (x === 0) ctx.moveTo(x, y);
              else ctx.lineTo(x, y);
            }
            ctx.stroke();
            phase += 0.01;
            animationId = requestAnimationFrame(animate);
          };
          animate();
          return () => {
            cancelAnimationFrame(animationId);
            window.removeEventListener("resize", resizeCanvas);
          };
        }, [theme]);

        const stats = [
          {
            icon: "Mic",
            finalValue: "431",
            label: "Conversation Turns",
            description:
              "Each turn consists of an amateur's query and an expert's contextual response.",
          },
          {
            icon: "Users",
            finalValue: "12",
            label: "Music Producers",
            description:
              "A diverse group of producers with varying levels of experience participated.",
          },
          {
            icon: "Music",
            finalValue: "7",
            label: "Mixing Sessions",
            description:
              "Sessions covered multiple genres, including rock, electronic, and acoustic music.",
          },
          {
            icon: "BarChart3",
            finalValue: "19.4s",
            label: "Avg. Audio Duration",
            description:
              "Audio clips are long enough to provide meaningful context for each turn.",
          },
        ];

        const audioSamples = [
          {
            id: "sample-1",
            title: "EQ Discussion",
            audio: "sample_001.mp3",
            amateur: "Do you like it drastic? The low shelf around 150Hz?",
            expert: "For this style of music, I think that's perfect.",
            context: "Discussing EQ adjustments on guitar track",
          },
          {
            id: "sample-2",
            title: "Compression on Drums",
            audio: "sample_006.mp3",
            amateur: "The drums feel a bit loose. Should I add compression?",
            expert:
              "Yeah, try a 4:1 ratio with a fast attack to tighten them up.",
            context: "Working on drum dynamics",
          },
          {
            id: "sample-3",
            title: "Reverb Settings",
            audio: "sample_004.mp3",
            amateur: "I feel like the vocals are too dry. What about reverb?",
            expert: "Let's add a plate reverb with about 1.5 seconds decay.",
            context: "Adding spatial effects to vocals",
          },
        ];

        const modelComparisons = [
          {
            prompt:
              "The bass seems to be clashing with the kick drum. Any suggestions?",
            human:
              "Try side-chain compression on the bass triggered by the kick. Also, cut around 60-80Hz on the bass and boost that range slightly on the kick.",
            qwen: "To resolve the clash between bass and kick drum, I recommend using EQ to carve out separate frequency spaces. Cut the bass around 60-80Hz where the kick's fundamental sits, and consider side-chain compression to duck the bass when the kick hits.",
            audio: "comparison1.mp3",
            id: "comp-1",
          },
          {
            prompt: "How can I make the mix sound wider?",
            human:
              "Use the Haas effect on some elements, pan your hi-hats and percussion, and try some stereo widening on the reverb returns. Keep bass and kick centered though.",
            qwen: "To achieve a wider mix, try these techniques: 1) Pan instruments to create space. 2) Use stereo delay or chorus. 3) Apply stereo imaging plugins carefully. 4) Keep low frequencies mono.",
            audio: "comparison2.mp3",
            id: "comp-2",
          },
        ];

        const pipelineSteps = [
          {
            title: "Raw Data",
            description: "7 hours of co-creative mixing sessions",
            image_dark: "imgs/pipeline-1.png",
            image_light: `imgs/pipeline-light-1.png?t=${new Date().getTime()}`,
          },
          {
            title: "Transcription",
            description: "Dialogue transcribed and cleaned",
            image_dark: "imgs/pipeline-2.png",
            image_light: `imgs/pipeline-light-2.png?t=${new Date().getTime()}`,
          },
          {
            title: "Speaker Split & Audio Alignment",
            description: "Amateur/Expert utterances aligned with audio",
            image_dark: "imgs/pipeline-3.png",
            image_light: `imgs/pipeline-light-3.png?t=${new Date().getTime()}`,
          },
          {
            title: "Sub-conversations",
            description: "Grouped by mixing topic (drums, vocals, etc.)",
            image_dark: "imgs/pipeline-4.png",
            image_light: `imgs/pipeline-light-4.png?t=${new Date().getTime()}`,
          },
          {
            title: "Dataset Instances",
            description: "431 instruction-response pairs",
            image_dark: "imgs/pipeline-5.png",
            image_light: `imgs/pipeline-light-5.png?t=${new Date().getTime()}`,
          },
        ];

        const bibtexRef = `@inproceedings{clemens2025mixassist,
  title={MixAssist: An Audio-Language Dataset for Co-Creative AI Assistance in Music Mixing},
  author={Clemens, Michael and MarasoviÄ‡, Ana},
  booktitle={Conference on Language Modeling (COLM)},
  year={2025}
}`;

        const handleComparisonChange = (index) => {
          if (index !== selectedComparison) {
            setIsTransitioning(true);
            setTimeout(() => {
              setSelectedComparison(index);
              setIsTransitioning(false);
            }, 300);
          }
        };

        const copyBibtex = () => {
          navigator.clipboard.writeText(bibtexRef);
          setCopiedBibtex(true);
          setTimeout(() => setCopiedBibtex(false), 2000);
        };

        return (
          <div
            className={getThemeClasses(
              "min-h-screen bg-black text-white",
              "min-h-screen bg-slate-50 text-slate-800"
            )}
          >
            {/* Hero Section */}
            <section
              className={getThemeClasses(
                "relative overflow-hidden bg-gradient-to-b from-gray-900 to-black",
                "relative overflow-hidden bg-gradient-to-b from-slate-100 to-slate-50"
              )}
            >
              <div
                className={getThemeClasses(
                  "absolute inset-0 bg-gradient-to-br from-orange-500/10 via-transparent to-teal-500/10",
                  "absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-orange-500/10"
                )}
              ></div>
              <canvas
                ref={canvasRef}
                className="absolute inset-0 opacity-30"
                style={{ width: "100%", height: "100%" }}
              />
              <div className="relative container mx-auto px-6 py-20">
                <div className="absolute top-6 right-6">
                  <button
                    onClick={toggleTheme}
                    className={getThemeClasses(
                      "p-3 bg-gray-800 hover:bg-gray-700 rounded-full border border-gray-700",
                      "p-3 bg-white/50 hover:bg-slate-200/80 rounded-full border border-slate-300"
                    )}
                    title={`Switch to ${
                      theme === "dark" ? "light" : "dark"
                    } mode`}
                  >
                    <LucideIcon
                      name={theme === "dark" ? "Sun" : "Moon"}
                      className={getThemeClasses(
                        "w-5 h-5 text-yellow-400",
                        "w-5 h-5 text-slate-600"
                      )}
                    />
                  </button>
                </div>
                <div className="max-w-4xl mx-auto text-center">
                  <div
                    className={getThemeClasses(
                      "inline-flex items-center gap-2 px-4 py-2 bg-teal-500/20 rounded-full border border-teal-500/30 mb-6",
                      "inline-flex items-center gap-2 px-4 py-2 bg-orange-100 rounded-full border border-orange-300 mb-6"
                    )}
                  >
                    <LucideIcon
                      name="Radio"
                      className={getThemeClasses(
                        "w-4 h-4 text-teal-400",
                        "w-4 h-4 text-orange-600"
                      )}
                    />
                    <span
                      className={getThemeClasses(
                        "text-sm text-teal-300",
                        "text-sm text-orange-700"
                      )}
                    >
                      COLM 2025
                    </span>
                  </div>
                  <h1
                    className={getThemeClasses(
                      "text-6xl font-bold mb-6 text-orange-400 drop-shadow-[0_0_30px_rgba(255,107,53,0.5)]",
                      "text-6xl font-bold mb-6 text-blue-600 drop-shadow-[0_0_30px_rgba(59,130,246,0.3)]"
                    )}
                  >
                    MixAssist
                  </h1>
                  <p
                    className={getThemeClasses(
                      "text-2xl text-gray-300 mb-8",
                      "text-2xl text-slate-600 mb-8"
                    )}
                  >
                    An Audio-Language Dataset for Co-Creative AI Assistance in
                    Music Mixing
                  </p>
                  <div
                    className={getThemeClasses(
                      "relative mx-auto max-w-3xl mb-12 rounded-2xl overflow-hidden shadow-2xl bg-gray-900/50 backdrop-blur-sm border border-orange-500/20",
                      "relative mx-auto max-w-3xl mb-12 rounded-2xl overflow-hidden shadow-xl bg-white/50 backdrop-blur-sm border border-slate-200"
                    )}
                  >
                    <div className="aspect-video flex items-center justify-center">
                      <div className="text-center">
                        <LucideIcon
                          name="Play"
                          className="w-16 h-16 mx-auto mb-4 text-blue-500"
                        />
                        <p
                          className={getThemeClasses(
                            "text-gray-400",
                            "text-slate-500"
                          )}
                        >
                          Video Overview Coming Soon
                        </p>
                      </div>
                    </div>
                  </div>
                  <div className="flex flex-wrap gap-4 justify-center">
                    <a
                      href="#"
                      className={getThemeClasses(
                        "inline-flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg shadow-lg",
                        "inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg shadow-blue-500/30"
                      )}
                    >
                      <LucideIcon name="FileText" className="w-5 h-5" />
                      <span>Read Paper</span>
                    </a>
                    <a
                      href="#"
                      className={getThemeClasses(
                        "inline-flex items-center gap-2 px-6 py-3 bg-teal-500/20 backdrop-blur-sm rounded-lg hover:bg-teal-500/30 border border-teal-500/50",
                        "inline-flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg shadow-lg shadow-orange-500/30"
                      )}
                    >
                      <LucideIcon name="Database" className="w-5 h-5" />
                      <span>Download Dataset</span>
                    </a>
                    <a
                      href="#"
                      className={getThemeClasses(
                        "inline-flex items-center gap-2 px-6 py-3 bg-gray-800 rounded-lg hover:bg-gray-700 border border-gray-700",
                        "inline-flex items-center gap-2 px-6 py-3 bg-white rounded-lg hover:bg-slate-200 border border-slate-300 text-slate-700"
                      )}
                    >
                      <LucideIcon name="Github" className="w-5 h-5" />
                      <span>View Code</span>
                    </a>
                  </div>
                </div>
              </div>
            </section>

            {/* Stats Section */}
            <section
              className={getThemeClasses(
                "py-20 relative bg-gradient-to-b from-black to-gray-900",
                "py-20 relative bg-gradient-to-b from-slate-50 to-slate-100"
              )}
            >
              <div className="container mx-auto px-6">
                <h2
                  className={getThemeClasses(
                    "text-4xl font-bold text-center mb-12 text-orange-400",
                    "text-4xl font-bold text-center mb-12 text-blue-600"
                  )}
                >
                  Dataset at a Glance
                </h2>
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto">
                  {stats.map((stat, index) => (
                    <AnimatedStatCard key={index} {...stat} theme={theme} />
                  ))}
                </div>
              </div>
            </section>

            {/* UPDATED: Dataset Construction Pipeline Section */}
            <section
              className={getThemeClasses(
                "py-20 bg-gray-800",
                "py-20 bg-slate-200"
              )}
            >
              <div className="container mx-auto px-6">
                <h2
                  className={getThemeClasses(
                    "text-4xl font-bold text-center mb-4 text-orange-400",
                    "text-4xl font-bold text-center mb-4 text-blue-600"
                  )}
                >
                  How We Built MixAssist
                </h2>
                <p
                  className={getThemeClasses(
                    "text-center text-gray-400 mb-16 max-w-2xl mx-auto",
                    "text-center text-slate-600 mb-16 max-w-2xl mx-auto"
                  )}
                >
                  From live mixing sessions to structured dataset instances,
                  each step is designed to capture the essence of co-creative
                  dialogue.
                </p>
                <div className="space-y-12">
                  {/* Top Row */}
                  <div className="flex flex-wrap justify-center items-center gap-8">
                    {pipelineSteps.slice(0, 3).map((step, index) => (
                      <React.Fragment key={`${index}-${theme}`}>
                        <AnimatedPipelineStep
                          step={step}
                          theme={theme}
                          animationDelay={`${index * 150}ms`}
                        />
                        {index < 2 && (
                          <div className="flex-shrink-0">
                            <LucideIcon
                              name="ArrowRight"
                              className={getThemeClasses(
                                "w-8 h-8 text-gray-400",
                                "w-8 h-8 text-slate-500"
                              )}
                            />
                          </div>
                        )}
                      </React.Fragment>
                    ))}
                  </div>
                  <div className="flex justify-center py-8">
                    <LucideIcon
                      name="ArrowDown"
                      className={getThemeClasses(
                        "w-10 h-10 text-gray-400",
                        "w-10 h-10 text-slate-500"
                      )}
                    />
                  </div>
                  {/* Bottom Row */}
                  <div className="flex flex-wrap justify-center items-center gap-8 md:w-2/3 mx-auto">
                    {pipelineSteps.slice(3).map((step, index) => (
                      <React.Fragment key={`${index + 3}-${theme}`}>
                        <AnimatedPipelineStep
                          step={step}
                          theme={theme}
                          animationDelay={`${(index + 3) * 150}ms`}
                        />
                        {index < 1 && (
                          <div className="flex-shrink-0">
                            <LucideIcon
                              name="ArrowRight"
                              className={getThemeClasses(
                                "w-8 h-8 text-gray-400",
                                "w-8 h-8 text-slate-500"
                              )}
                            />
                          </div>
                        )}
                      </React.Fragment>
                    ))}
                  </div>
                </div>
              </div>
            </section>

            {/* Audio Samples Section */}
            <section
              className={getThemeClasses(
                "py-20 bg-gray-900",
                "py-20 bg-slate-50"
              )}
            >
              <div className="container mx-auto px-6">
                <h2
                  className={getThemeClasses(
                    "text-4xl font-bold text-center mb-4 text-orange-400",
                    "text-4xl font-bold text-center mb-4 text-blue-600"
                  )}
                >
                  Audio-Grounded Dialogues
                </h2>
                <p
                  className={getThemeClasses(
                    "text-center text-gray-400 mb-12 max-w-2xl mx-auto",
                    "text-center text-slate-600 mb-12 max-w-2xl mx-auto"
                  )}
                >
                  Explore real conversations between amateur and expert
                  producers.
                </p>
                <div className="max-w-4xl mx-auto space-y-8">
                  {audioSamples.map((sample, index) => (
                    <div
                      key={sample.id}
                      className={getThemeClasses(
                        "bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",
                        "bg-white backdrop-blur-sm rounded-2xl p-8 border border-slate-200 shadow-sm"
                      )}
                      style={{
                        animation: `fadeInUp 0.6s ease-out ${
                          index * 0.1
                        }s both`,
                      }}
                    >
                      <div className="flex items-center justify-between mb-6">
                        <h3 className="text-xl font-semibold flex items-center gap-3">
                          <LucideIcon
                            name="Headphones"
                            className={getThemeClasses(
                              "w-5 h-5 text-orange-400",
                              "w-5 h-5 text-blue-500"
                            )}
                          />
                          {sample.title}
                        </h3>
                        <AudioPlayer
                          id={sample.id}
                          onPlay={(id) => handleGenericPlay(id, sample.audio)}
                          isPlaying={activeAudio === sample.id}
                          progress={audioProgress[sample.id] || 0}
                          theme={theme}
                        />
                      </div>
                      <p
                        className={getThemeClasses(
                          "text-sm text-gray-400 mb-6",
                          "text-sm text-slate-500 mb-6"
                        )}
                      >
                        {sample.context}
                      </p>
                      <div className="space-y-4">
                        <div className="bg-blue-500/10 rounded-lg p-4 border border-blue-500/20">
                          <div className="text-xs text-blue-500 mb-2 font-semibold">
                            Amateur
                          </div>
                          <p
                            className={getThemeClasses(
                              "text-gray-200",
                              "text-slate-800"
                            )}
                          >
                            {sample.amateur}
                          </p>
                        </div>
                        <div
                          className={getThemeClasses(
                            "bg-cyan-500/10 rounded-lg p-4 border border-cyan-500/20",
                            "bg-orange-500/10 rounded-lg p-4 border border-orange-500/20"
                          )}
                        >
                          <div
                            className={getThemeClasses(
                              "text-xs text-cyan-600 mb-2 font-semibold",
                              "text-xs text-orange-600 mb-2 font-semibold"
                            )}
                          >
                            Expert
                          </div>
                          <p
                            className={getThemeClasses(
                              "text-gray-200",
                              "text-slate-800"
                            )}
                          >
                            {sample.expert}
                          </p>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </section>

            {/* Model Comparison Section */}
            <section
              className={getThemeClasses(
                "py-20 bg-gray-800",
                "py-20 bg-slate-100"
              )}
            >
              <div className="container mx-auto px-6">
                <h2
                  className={getThemeClasses(
                    "text-4xl font-bold text-center mb-4 text-orange-400",
                    "text-4xl font-bold text-center mb-4 text-blue-600"
                  )}
                >
                  AI vs Human Expert Responses
                </h2>
                <p
                  className={getThemeClasses(
                    "text-center text-gray-400 mb-12 max-w-2xl mx-auto",
                    "text-center text-slate-600 mb-12 max-w-2xl mx-auto"
                  )}
                >
                  Compare responses from our fine-tuned Qwen model with human
                  expert advice.
                </p>
                <div className="max-w-5xl mx-auto">
                  <div className="flex gap-4 mb-8 justify-center">
                    {modelComparisons.map((_, index) => (
                      <button
                        key={index}
                        onClick={() => handleComparisonChange(index)}
                        className={`px-6 py-3 rounded-lg transition-all duration-300 transform ${
                          selectedComparison === index
                            ? getThemeClasses(
                                "bg-orange-500 shadow-lg scale-105 text-white",
                                "bg-blue-600 shadow-lg scale-105 text-white"
                              )
                            : getThemeClasses(
                                "bg-gray-700 hover:bg-gray-600 text-gray-300",
                                "bg-white hover:bg-slate-200 text-slate-700 border border-slate-300"
                              )
                        }`}
                      >
                        Example {index + 1}
                      </button>
                    ))}
                  </div>
                  <div
                    className={`${getThemeClasses(
                      "bg-gray-700/50",
                      "bg-white"
                    )} backdrop-blur-sm rounded-2xl p-8 border ${getThemeClasses(
                      "border-gray-600",
                      "border-slate-200 shadow-md"
                    )} transition-all duration-500 ${
                      isTransitioning
                        ? "opacity-0 transform scale-95"
                        : "opacity-100 transform scale-100"
                    }`}
                  >
                    <div className="mb-6">
                      <div className="flex items-center justify-between mb-4">
                        <h3
                          className={getThemeClasses(
                            "text-lg font-semibold text-orange-400",
                            "text-lg font-semibold text-blue-600"
                          )}
                        >
                          User Query
                        </h3>
                        <AudioPlayer
                          id={modelComparisons[selectedComparison].id}
                          onPlay={(id) =>
                            handleGenericPlay(
                              id,
                              modelComparisons[selectedComparison].audio
                            )
                          }
                          isPlaying={
                            activeAudio ===
                            modelComparisons[selectedComparison].id
                          }
                          progress={
                            audioProgress[
                              modelComparisons[selectedComparison].id
                            ] || 0
                          }
                          theme={theme}
                        />
                      </div>
                      <p
                        className={getThemeClasses(
                          "text-gray-300 italic",
                          "text-slate-600 italic"
                        )}
                      >
                        "{modelComparisons[selectedComparison].prompt}"
                      </p>
                    </div>
                    <div className="grid md:grid-cols-2 gap-6">
                      <div
                        className={getThemeClasses(
                          "bg-cyan-500/10 rounded-lg p-6 border border-cyan-500/20",
                          "bg-orange-500/10 rounded-lg p-6 border border-orange-500/20"
                        )}
                      >
                        <h4
                          className={getThemeClasses(
                            "text-sm font-semibold text-cyan-600 mb-3 flex items-center gap-2",
                            "text-sm font-semibold text-orange-600 mb-3 flex items-center gap-2"
                          )}
                        >
                          <LucideIcon name="Users" className="w-4 h-4" />
                          Human Expert Response
                        </h4>
                        <p
                          className={getThemeClasses(
                            "text-gray-200 text-sm leading-relaxed",
                            "text-slate-800 text-sm leading-relaxed"
                          )}
                        >
                          {modelComparisons[selectedComparison].human}
                        </p>
                      </div>
                      <div className="bg-blue-500/10 rounded-lg p-6 border border-blue-500/20 transform transition-all duration-500 hover:scale-[1.02]">
                        <h4 className="text-sm font-semibold text-blue-600 mb-3 flex items-center gap-2">
                          <LucideIcon name="Bot" className="w-4 h-4" />
                          Qwen Model Response
                        </h4>
                        <p
                          className={getThemeClasses(
                            "text-gray-200 text-sm leading-relaxed",
                            "text-slate-800 text-sm leading-relaxed"
                          )}
                        >
                          {modelComparisons[selectedComparison].qwen}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <DatasetExplorer theme={theme} />

            <section
              className={getThemeClasses(
                "py-20 bg-black",
                "py-20 bg-slate-100"
              )}
            >
              <div className="container mx-auto px-6">
                <div className="max-w-4xl mx-auto text-center">
                  <h3
                    className={getThemeClasses(
                      "text-2xl font-bold mb-4 text-orange-400",
                      "text-2xl font-bold mb-4 text-blue-600"
                    )}
                  >
                    Using MixAssist in Your Research?
                  </h3>
                  <p
                    className={getThemeClasses(
                      "text-gray-400 mb-6",
                      "text-slate-600 mb-6"
                    )}
                  >
                    If you use our dataset in your work, please cite it with the
                    following BibTeX reference:
                  </p>
                  <div
                    className={getThemeClasses(
                      "relative bg-gray-800 rounded-lg p-6 text-left",
                      "relative bg-slate-200 rounded-lg p-6 text-left"
                    )}
                  >
                    <pre
                      className={getThemeClasses(
                        "text-sm text-gray-300 overflow-x-auto whitespace-pre-wrap font-mono",
                        "text-sm text-slate-700 overflow-x-auto whitespace-pre-wrap font-mono"
                      )}
                    >
                      {bibtexRef}
                    </pre>
                    <button
                      onClick={copyBibtex}
                      className={getThemeClasses(
                        "absolute top-4 right-4 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg",
                        "absolute top-4 right-4 p-2 bg-slate-300 hover:bg-slate-400/50 rounded-lg"
                      )}
                    >
                      <LucideIcon
                        name={copiedBibtex ? "Check" : "Copy"}
                        className={`w-5 h-5 ${
                          copiedBibtex
                            ? "text-teal-400"
                            : getThemeClasses("text-white", "text-slate-600")
                        }`}
                      />
                    </button>
                  </div>
                </div>
              </div>
            </section>

            <section className="py-20 bg-gradient-to-r from-blue-900/20 to-orange-900/20">
              <div className="container mx-auto px-6 text-center">
                <h2
                  className={getThemeClasses(
                    "text-3xl font-bold mb-6",
                    "text-3xl font-bold mb-6 text-slate-900"
                  )}
                >
                  Start Building Co-Creative Music AI
                </h2>
                <p
                  className={getThemeClasses(
                    "text-gray-300 mb-8 max-w-2xl mx-auto",
                    "text-slate-600 mb-8 max-w-2xl mx-auto"
                  )}
                >
                  MixAssist provides the foundation for developing AI assistants
                  that empower musicians through collaborative learning and
                  creative exploration.
                </p>
                <div className="flex gap-4 justify-center">
                  <a
                    href="#"
                    className={getThemeClasses(
                      "inline-flex items-center gap-2 px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold shadow-lg",
                      "inline-flex items-center gap-2 px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold shadow-lg shadow-blue-500/40"
                    )}
                  >
                    <LucideIcon name="Download" className="w-5 h-5" />
                    <span>Get the Dataset</span>
                    <LucideIcon name="ChevronRight" className="w-4 h-4" />
                  </a>
                </div>
              </div>
            </section>

            <footer
              className={getThemeClasses(
                "py-8 border-t border-gray-800 bg-black",
                "py-8 border-t border-slate-200 bg-slate-50"
              )}
            >
              <div className="container mx-auto px-6 text-center">
                <p
                  className={getThemeClasses("text-gray-400", "text-slate-600")}
                >
                  Â© 2025 MixAssist Dataset. Published at COLM 2025.
                </p>
              </div>
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<MixAssistWebsite />);
    </script>
  </body>
</html>
